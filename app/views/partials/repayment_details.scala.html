@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.ViewConfig
@import model.des._
@import model.RepaymentData
@import model.Vrn
@import langswitch.LangMessages

@this(
viewsHelpers: views.ViewsHelpers,
appConfig: ViewConfig
)

@(
showBankDetails: Boolean,
bankDetailsOption: Option[BankDetails],
address: Option[String],
addressExists: Boolean,
vrn: Vrn)(
implicit
request: Request[_]
)

@import viewsHelpers.requestSupport._

@bankDetailsOption.map{bankDetails =>
<h3>@{LangMessages.`Your repayment details`.show}</h3>
<p>@{LangMessages.`You are currently paid by bank transfer`.show}</p>
<p id="acc-name" class="govuk-!-margin-bottom-1"><strong>@{LangMessages.`Name on account`.show} @{bankDetails.accountHolderName}</strong></p>
<p id="acc-number" class="govuk-!-margin-bottom-1"><strong>@{LangMessages.`Account number`.show} @{bankDetails.obscureBankAccountNumber}</strong></p>
<p id="acc-sort-code"><strong>@{LangMessages.`Sort code`.show} @{bankDetails.sortCode}</strong></p>
<p><a href='@routes.Controller.viewRepaymentAccount(vrn)' id="manage-account">@{LangMessages.`Manage your repayment account`.show}</a></p>
}


@if(addressExists && (!(showBankDetails))) {
<h3>@{LangMessages.`Your repayment details`.show}</h3>
<p>@{LangMessages.`Currently sent to`.show}</p>
<p id="address">@Html(address.getOrElse(""))</p>
<p>@{LangMessages.`For faster payment next time`.show} <a href="www.changeme.com">@{LangMessages.`add a repayment account`.show}</a></p>
<p><a href="www.changeme.com">@{LangMessages.`Update your correspondence address`.show}</a></p>
}

