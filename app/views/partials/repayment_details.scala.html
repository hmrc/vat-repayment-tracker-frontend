@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.ViewConfig
@import model.des._
@import model.RepaymentData
@import langswitch.LangMessages

@this(
viewsHelpers: views.ViewsHelpers,
appConfig: ViewConfig
)

@(
showBankDetails: Boolean,
bankDetails: Option[BankDetails],
address: String)(
implicit
request: Request[_]
)

@import viewsHelpers.requestSupport._


<h3>@{LangMessages.`Your repayment details`.show}</h3>
@if(showBankDetails) {
<p>@{LangMessages.`You are currently paid by bank transfer`.show}</p>
<p id="acc-name" class="govuk-!-margin-bottom-1"><strong>@{LangMessages.`Name on account`.show} @bankDetails.fold("")(_.accountHolderName.value)</strong></p>
<p id="acc-number" class="govuk-!-margin-bottom-1"><strong>@{LangMessages.`Account number`.show} @bankDetails.fold("")(_.bankAccountNumber.value)</strong></p>
<p id="acc-sort-code"><strong>@{LangMessages.`Sort code`.show} @bankDetails.fold("")(_.sortCode.value)</strong></p>
</br>
<p><a href='@routes.Controller.viewRepaymentAccount(bankDetails.fold(AccountHolderName(""))(_.accountHolderName),bankDetails.fold(BankAccountNumber(""))(_.bankAccountNumber),bankDetails.fold(SortCode(""))(_.sortCode))' id="manage-account">@{LangMessages.`Manage your repayment account`.show}</a></p>
}else{
<p>@{LangMessages.`Currently sent to`.show}</p>
</br>
<p id="address">@Html(address)</p>
</br>
<p>@{LangMessages.`For faster payment next time`.show} <a href="www.changeme.com">@{LangMessages.`add a repayment account`.show}</a></p>
</br>
<p><a href="www.changeme.com">@{LangMessages.`Update your correspondence address`.show}</a></p>
}

